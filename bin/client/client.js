/*! For license information please see client.js.LICENSE.txt */
(()=>{var t={23:(t,e)=>{function n(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,o=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:o,scale:o?4:i,margin:e,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,n){const o=e.getScale(t,n);return Math.floor((t+2*n.margin)*o)},e.qrToImageData=function(t,n,o){const i=n.modules.size,r=n.modules.data,s=e.getScale(i,o),a=Math.floor((i+2*o.margin)*s),l=o.margin*s,c=[o.color.light,o.color.dark];for(let e=0;e<a;e++)for(let n=0;n<a;n++){let h=4*(e*a+n),u=o.color.light;e>=l&&n>=l&&e<a-l&&n<a-l&&(u=c[r[Math.floor((e-l)/s)*i+Math.floor((n-l)/s)]?1:0]),t[h++]=u.r,t[h++]=u.g,t[h++]=u.b,t[h]=u.a}}},78:(t,e)=>{e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return n}}},83:(t,e,n)=>{const o=n(78),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case o.L:return i[4*(t-1)+0];case o.M:return i[4*(t-1)+1];case o.Q:return i[4*(t-1)+2];case o.H:return i[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case o.L:return r[4*(t-1)+0];case o.M:return r[4*(t-1)+1];case o.Q:return r[4*(t-1)+2];case o.H:return r[4*(t-1)+3];default:return}}},103:(t,e)=>{e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(t,n,o){switch(t){case e.Patterns.PATTERN000:return(n+o)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return o%3==0;case e.Patterns.PATTERN011:return(n+o)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2==0;case e.Patterns.PATTERN101:return n*o%2+n*o%3==0;case e.Patterns.PATTERN110:return(n*o%2+n*o%3)%2==0;case e.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let n=0,o=0,i=0,r=null,s=null;for(let a=0;a<e;a++){o=i=0,r=s=null;for(let l=0;l<e;l++){let e=t.get(a,l);e===r?o++:(o>=5&&(n+=o-5+3),r=e,o=1),e=t.get(l,a),e===s?i++:(i>=5&&(n+=i-5+3),s=e,i=1)}o>=5&&(n+=o-5+3),i>=5&&(n+=i-5+3)}return n},e.getPenaltyN2=function(t){const e=t.size;let n=0;for(let o=0;o<e-1;o++)for(let i=0;i<e-1;i++){const e=t.get(o,i)+t.get(o,i+1)+t.get(o+1,i)+t.get(o+1,i+1);4!==e&&0!==e||n++}return 3*n},e.getPenaltyN3=function(t){const e=t.size;let n=0,o=0,i=0;for(let r=0;r<e;r++){o=i=0;for(let s=0;s<e;s++)o=o<<1&2047|t.get(r,s),s>=10&&(1488===o||93===o)&&n++,i=i<<1&2047|t.get(s,r),s>=10&&(1488===i||93===i)&&n++}return 40*n},e.getPenaltyN4=function(t){let e=0;const n=t.data.length;for(let o=0;o<n;o++)e+=t.data[o];return 10*Math.abs(Math.ceil(100*e/n/5)-10)},e.applyMask=function(t,e){const o=e.size;for(let i=0;i<o;i++)for(let r=0;r<o;r++)e.isReserved(r,i)||e.xor(r,i,n(t,r,i))},e.getBestMask=function(t,n){const o=Object.keys(e.Patterns).length;let i=0,r=1/0;for(let s=0;s<o;s++){n(s),e.applyMask(s,t);const o=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(s,t),o<r&&(r=o,i=s)}return i}},122:function(t){var e;e=function(){return function(){var t={686:function(t,e,n){"use strict";n.d(e,{default:function(){return b}});var o=n(279),i=n.n(o),r=n(370),s=n.n(r),a=n(817),l=n.n(a);function c(t){try{return document.execCommand(t)}catch(t){return!1}}var h=function(t){var e=l()(t);return c("cut"),e},u=function(t,e){var n=function(t){var e="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[e?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(o,"px"),n.setAttribute("readonly",""),n.value=t,n}(t);e.container.appendChild(n);var o=l()(n);return c("copy"),n.remove(),o},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof t?n=u(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==t?void 0:t.type)?n=u(t.value,e):(n=l()(t),c("copy")),n};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function y(t,e){var n="data-clipboard-".concat(t);if(e.hasAttribute(n))return e.getAttribute(n)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(l,t);var e,n,o,i,r,a=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e,n=v(i);if(r){var o=v(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return!(e=t)||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this):e});function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this)).resolveOptions(e),n.listenClick(t),n}return e=l,n=[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===f(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=s()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,o=t.container,i=t.target,r=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==i){if(!i||"object"!==g(i)||1!==i.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&i.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(i.hasAttribute("readonly")||i.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return r?d(r,{container:o}):i?"cut"===n?h(i):d(i,{container:o}):void 0}({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(o?"success":"error",{action:n,text:o,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return y("action",t)}},{key:"defaultTarget",value:function(t){var e=y("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return y("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}],o=[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return d(t,e)}},{key:"cut",value:function(t){return h(t)}},{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}],n&&p(e.prototype,n),o&&p(e,o),l}(i()),b=w},828:function(t){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var o=n(828);function i(t,e,n,o,i){var s=r.apply(this,arguments);return t.addEventListener(n,s,i),{destroy:function(){t.removeEventListener(n,s,i)}}}function r(t,e,n,i){return function(n){n.delegateTarget=o(n.target,e),n.delegateTarget&&i.call(t,n)}}t.exports=function(t,e,n,o,r){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return i(t,e,n,o,r)})))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var o=n(879),i=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!o.string(e))throw new TypeError("Second argument must be a String");if(!o.fn(n))throw new TypeError("Third argument must be a Function");if(o.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(o.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(o.string(t))return function(t,e,n){return i(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(t){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(t),o.removeAllRanges(),o.addRange(i),e=o.toString()}return e}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function i(){o.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,s=o.length;r<s;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}return n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(686)}().default},t.exports=e()},132:(t,e)=>{const n=new Uint8Array(512),o=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)n[e]=t,o[t]=e,t<<=1,256&t&&(t^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return o[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[o[t]+o[e]]}},135:(t,e)=>{let n;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return o[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return void 0!==n},e.toSJIS=function(t){return n(t)}},294:t=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},351:(t,e,n)=>{const o=n(135).getSymbolSize;e.getPositions=function(t){const e=o(t);return[[0,0],[e-7,0],[0,e-7]]}},376:t=>{function e(){this.buffer=[],this.length=0}e.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=e},445:(t,e,n)=>{const o=n(135),i=n(83),r=n(78),s=n(743),a=n(459),l=o.getBCHDigit(7973);function c(t,e){return s.getCharCountIndicator(t,e)+4}function h(t,e){let n=0;return t.forEach((function(t){const o=c(t.mode,e);n+=o+t.getBitsLength()})),n}e.from=function(t,e){return a.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,n){if(!a.isValid(t))throw new Error("Invalid QR Code version");void 0===n&&(n=s.BYTE);const r=8*(o.getSymbolTotalCodewords(t)-i.getTotalCodewordsCount(t,e));if(n===s.MIXED)return r;const l=r-c(n,t);switch(n){case s.NUMERIC:return Math.floor(l/10*3);case s.ALPHANUMERIC:return Math.floor(l/11*2);case s.KANJI:return Math.floor(l/13);case s.BYTE:default:return Math.floor(l/8)}},e.getBestVersionForData=function(t,n){let o;const i=r.from(n,r.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let o=1;o<=40;o++)if(h(t,o)<=e.getCapacity(o,n,s.MIXED))return o}(t,i);if(0===t.length)return 1;o=t[0]}else o=t;return function(t,n,o){for(let i=1;i<=40;i++)if(n<=e.getCapacity(i,o,t))return i}(o.mode,o.getLength(),i)},e.getEncodedBits=function(t){if(!a.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;o.getBCHDigit(e)-l>=0;)e^=7973<<o.getBCHDigit(e)-l;return t<<12|e}},459:(t,e)=>{e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},549:t=>{"use strict";var e={single_source_shortest_paths:function(t,n,o){var i={},r={};r[n]=0;var s,a,l,c,h,u,d,g=e.PriorityQueue.make();for(g.push(n,0);!g.empty();)for(l in a=(s=g.pop()).value,c=s.cost,h=t[a]||{})h.hasOwnProperty(l)&&(u=c+h[l],d=r[l],(void 0===r[l]||d>u)&&(r[l]=u,g.push(l,u),i[l]=a));if(void 0!==o&&void 0===r[o]){var f=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(f)}return i},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],o=e;o;)n.push(o),t[o],o=t[o];return n.reverse(),n},find_path:function(t,n,o){var i=e.single_source_shortest_paths(t,n,o);return e.extract_shortest_path_from_predecessor_list(i,o)},PriorityQueue:{make:function(t){var n,o=e.PriorityQueue,i={};for(n in t=t||{},o)o.hasOwnProperty(n)&&(i[n]=o[n]);return i.queue=[],i.sorter=t.sorter||o.default_sorter,i},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e},552:(t,e,n)=>{const o=n(743),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(t){this.mode=o.ALPHANUMERIC,this.data=t}r.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*i.indexOf(this.data[e]);n+=i.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},t.exports=r},575:(t,e,n)=>{const o=n(826);function i(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(t){this.degree=t,this.genPoly=o.generateECPolynomial(this.degree)},i.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=o.mod(e,this.genPoly),i=this.degree-n.length;if(i>0){const t=new Uint8Array(this.degree);return t.set(n,i),t}return n},t.exports=i},578:(t,e,n)=>{const o=n(743),i=n(135);function r(t){this.mode=o.KANJI,this.data=t}r.getBitsLength=function(t){return 13*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=i.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}},t.exports=r},588:(t,e,n)=>{const o=n(135).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,n=o(t),i=145===n?26:2*Math.ceil((n-13)/(2*e-2)),r=[n-7];for(let t=1;t<e-1;t++)r[t]=r[t-1]-i;return r.push(6),r.reverse()},e.getPositions=function(t){const n=[],o=e.getRowColCoords(t),i=o.length;for(let t=0;t<i;t++)for(let e=0;e<i;e++)0===t&&0===e||0===t&&e===i-1||t===i-1&&0===e||n.push([o[t],o[e]]);return n}},656:(t,e,n)=>{const o=n(135),i=o.getBCHDigit(1335);e.getEncodedBits=function(t,e){const n=t.bit<<3|e;let r=n<<10;for(;o.getBCHDigit(r)-i>=0;)r^=1335<<o.getBCHDigit(r)-i;return 21522^(n<<10|r)}},712:(t,e,n)=>{const o=n(294),i=n(726),r=n(752),s=n(973);function a(t,e,n,r,s){const a=[].slice.call(arguments,1),l=a.length,c="function"==typeof a[l-1];if(!c&&!o())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=e,e=r=void 0):2!==l||e.getContext||(r=n,n=e,e=void 0),new Promise((function(o,s){try{const s=i.create(n,r);o(t(s,e,r))}catch(t){s(t)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(s=n,n=e,e=r=void 0):3===l&&(e.getContext&&void 0===s?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0));try{const o=i.create(n,r);s(null,t(o,e,r))}catch(t){s(t)}}e.create=i.create,e.toCanvas=a.bind(null,r.render),e.toDataURL=a.bind(null,r.renderToDataURL),e.toString=a.bind(null,(function(t,e,n){return s.render(t,n)}))},726:(t,e,n)=>{const o=n(135),i=n(78),r=n(376),s=n(859),a=n(588),l=n(351),c=n(103),h=n(83),u=n(575),d=n(445),g=n(656),f=n(743),p=n(994);function m(t,e,n){const o=t.size,i=g.getEncodedBits(e,n);let r,s;for(r=0;r<15;r++)s=1==(i>>r&1),r<6?t.set(r,8,s,!0):r<8?t.set(r+1,8,s,!0):t.set(o-15+r,8,s,!0),r<8?t.set(8,o-r-1,s,!0):r<9?t.set(8,15-r-1+1,s,!0):t.set(8,15-r-1,s,!0);t.set(o-8,8,1,!0)}function v(t,e,n,i){let g;if(Array.isArray(t))g=p.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let o=e;if(!o){const e=p.rawSplit(t);o=d.getBestVersionForData(e,n)}g=p.fromString(t,o||40)}}const v=d.getBestVersionForData(g,n);if(!v)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<v)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+v+".\n")}else e=v;const y=function(t,e,n){const i=new r;n.forEach((function(e){i.put(e.mode.bit,4),i.put(e.getLength(),f.getCharCountIndicator(e.mode,t)),e.write(i)}));const s=8*(o.getSymbolTotalCodewords(t)-h.getTotalCodewordsCount(t,e));for(i.getLengthInBits()+4<=s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);const a=(s-i.getLengthInBits())/8;for(let t=0;t<a;t++)i.put(t%2?17:236,8);return function(t,e,n){const i=o.getSymbolTotalCodewords(e),r=i-h.getTotalCodewordsCount(e,n),s=h.getBlocksCount(e,n),a=s-i%s,l=Math.floor(i/s),c=Math.floor(r/s),d=c+1,g=l-c,f=new u(g);let p=0;const m=new Array(s),v=new Array(s);let y=0;const w=new Uint8Array(t.buffer);for(let t=0;t<s;t++){const e=t<a?c:d;m[t]=w.slice(p,p+e),v[t]=f.encode(m[t]),p+=e,y=Math.max(y,e)}const b=new Uint8Array(i);let E,C,T=0;for(E=0;E<y;E++)for(C=0;C<s;C++)E<m[C].length&&(b[T++]=m[C][E]);for(E=0;E<g;E++)for(C=0;C<s;C++)b[T++]=v[C][E];return b}(i,t,e)}(e,n,g),w=o.getSymbolSize(e),b=new s(w);return function(t,e){const n=t.size,o=l.getPositions(e);for(let e=0;e<o.length;e++){const i=o[e][0],r=o[e][1];for(let e=-1;e<=7;e++)if(!(i+e<=-1||n<=i+e))for(let o=-1;o<=7;o++)r+o<=-1||n<=r+o||(e>=0&&e<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===e||6===e)||e>=2&&e<=4&&o>=2&&o<=4?t.set(i+e,r+o,!0,!0):t.set(i+e,r+o,!1,!0))}}(b,e),function(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(b),function(t,e){const n=a.getPositions(e);for(let e=0;e<n.length;e++){const o=n[e][0],i=n[e][1];for(let e=-2;e<=2;e++)for(let n=-2;n<=2;n++)-2===e||2===e||-2===n||2===n||0===e&&0===n?t.set(o+e,i+n,!0,!0):t.set(o+e,i+n,!1,!0)}}(b,e),m(b,n,0),e>=7&&function(t,e){const n=t.size,o=d.getEncodedBits(e);let i,r,s;for(let e=0;e<18;e++)i=Math.floor(e/3),r=e%3+n-8-3,s=1==(o>>e&1),t.set(i,r,s,!0),t.set(r,i,s,!0)}(b,e),function(t,e){const n=t.size;let o=-1,i=n-1,r=7,s=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!t.isReserved(i,a-n)){let o=!1;s<e.length&&(o=1==(e[s]>>>r&1)),t.set(i,a-n,o),r--,-1===r&&(s++,r=7)}if(i+=o,i<0||n<=i){i-=o,o=-o;break}}}(b,y),isNaN(i)&&(i=c.getBestMask(b,m.bind(null,b,n))),c.applyMask(i,b),m(b,n,i),{modules:b,version:e,errorCorrectionLevel:n,maskPattern:i,segments:g}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n,r,s=i.M;return void 0!==e&&(s=i.from(e.errorCorrectionLevel,i.M),n=d.from(e.version),r=c.from(e.maskPattern),e.toSJISFunc&&o.setToSJISFunction(e.toSJISFunc)),v(t,n,s,r)}},743:(t,e,n)=>{const o=n(459),i=n(977);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!o.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return i.testNumeric(t)?e.NUMERIC:i.testAlphanumeric(t)?e.ALPHANUMERIC:i.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return n}}},752:(t,e,n)=>{const o=n(23);e.render=function(t,e,n){let i=n,r=e;void 0!==i||e&&e.getContext||(i=e,e=void 0),e||(r=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),i=o.getOptions(i);const s=o.getImageWidth(t.modules.size,i),a=r.getContext("2d"),l=a.createImageData(s,s);return o.qrToImageData(l.data,t,i),function(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}(a,r,s),a.putImageData(l,0,0),r},e.renderToDataURL=function(t,n,o){let i=o;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});const r=e.render(t,n,i),s=i.type||"image/png",a=i.rendererOpts||{};return r.toDataURL(s,a.quality)}},826:(t,e,n)=>{const o=n(132);e.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let i=0;i<t.length;i++)for(let r=0;r<e.length;r++)n[i+r]^=o.mul(t[i],e[r]);return n},e.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){const t=n[0];for(let i=0;i<e.length;i++)n[i]^=o.mul(e[i],t);let i=0;for(;i<n.length&&0===n[i];)i++;n=n.slice(i)}return n},e.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let i=0;i<t;i++)n=e.mul(n,new Uint8Array([1,o.exp(i)]));return n}},831:(t,e,n)=>{const o=n(851),i=n(743);function r(t){this.mode=i.BYTE,"string"==typeof t&&(t=o(t)),this.data=new Uint8Array(t)}r.getBitsLength=function(t){return 8*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},t.exports=r},851:t=>{"use strict";t.exports=function(t){for(var e=[],n=t.length,o=0;o<n;o++){var i=t.charCodeAt(o);if(i>=55296&&i<=56319&&n>o+1){var r=t.charCodeAt(o+1);r>=56320&&r<=57343&&(i=1024*(i-55296)+r-56320+65536,o+=1)}i<128?e.push(i):i<2048?(e.push(i>>6|192),e.push(63&i|128)):i<55296||i>=57344&&i<65536?(e.push(i>>12|224),e.push(i>>6&63|128),e.push(63&i|128)):i>=65536&&i<=1114111?(e.push(i>>18|240),e.push(i>>12&63|128),e.push(i>>6&63|128),e.push(63&i|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},859:t=>{function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}e.prototype.set=function(t,e,n,o){const i=t*this.size+e;this.data[i]=n,o&&(this.reservedBit[i]=!0)},e.prototype.get=function(t,e){return this.data[t*this.size+e]},e.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},e.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=e},910:(t,e,n)=>{const o=n(743);function i(t){this.mode=o.NUMERIC,this.data=t.toString()}i.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e,n,o;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),o=parseInt(n,10),t.put(o,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),o=parseInt(n,10),t.put(o,3*i+1))},t.exports=i},973:(t,e,n)=>{const o=n(23);function i(t,e){const n=t.a/255,o=e+'="'+t.hex+'"';return n<1?o+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':o}function r(t,e,n){let o=t+e;return void 0!==n&&(o+=" "+n),o}e.render=function(t,e,n){const s=o.getOptions(e),a=t.modules.size,l=t.modules.data,c=a+2*s.margin,h=s.color.light.a?"<path "+i(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+i(s.color.dark,"stroke")+' d="'+function(t,e,n){let o="",i=0,s=!1,a=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),h=Math.floor(l/e);c||s||(s=!0),t[l]?(a++,l>0&&c>0&&t[l-1]||(o+=s?r("M",c+n,.5+h+n):r("m",i,0),i=0,s=!1),c+1<e&&t[l+1]||(o+=r("h",a),a=0)):i++}return o}(l,a,s.margin)+'"/>',d='viewBox="0 0 '+c+" "+c+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+h+u+"</svg>\n";return"function"==typeof n&&n(null,g),g}},977:(t,e)=>{const n="[0-9]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+")(?:.|[\r\n]))+";e.KANJI=new RegExp(o,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(i,"g"),e.NUMERIC=new RegExp(n,"g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const r=new RegExp("^"+o+"$"),s=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return r.test(t)},e.testNumeric=function(t){return s.test(t)},e.testAlphanumeric=function(t){return a.test(t)}},994:(t,e,n)=>{const o=n(743),i=n(910),r=n(552),s=n(831),a=n(578),l=n(977),c=n(135),h=n(549);function u(t){return unescape(encodeURIComponent(t)).length}function d(t,e,n){const o=[];let i;for(;null!==(i=t.exec(n));)o.push({data:i[0],index:i.index,mode:e,length:i[0].length});return o}function g(t){const e=d(l.NUMERIC,o.NUMERIC,t),n=d(l.ALPHANUMERIC,o.ALPHANUMERIC,t);let i,r;return c.isKanjiModeEnabled()?(i=d(l.BYTE,o.BYTE,t),r=d(l.KANJI,o.KANJI,t)):(i=d(l.BYTE_KANJI,o.BYTE,t),r=[]),e.concat(n,i,r).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function f(t,e){switch(e){case o.NUMERIC:return i.getBitsLength(t);case o.ALPHANUMERIC:return r.getBitsLength(t);case o.KANJI:return a.getBitsLength(t);case o.BYTE:return s.getBitsLength(t)}}function p(t,e){let n;const l=o.getBestModeForData(t);if(n=o.from(e,l),n!==o.BYTE&&n.bit<l.bit)throw new Error('"'+t+'" cannot be encoded with mode '+o.toString(n)+".\n Suggested mode is: "+o.toString(l));switch(n!==o.KANJI||c.isKanjiModeEnabled()||(n=o.BYTE),n){case o.NUMERIC:return new i(t);case o.ALPHANUMERIC:return new r(t);case o.KANJI:return new a(t);case o.BYTE:return new s(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(p(e,null)):e.data&&t.push(p(e.data,e.mode)),t}),[])},e.fromString=function(t,n){const i=function(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];switch(i.mode){case o.NUMERIC:e.push([i,{data:i.data,mode:o.ALPHANUMERIC,length:i.length},{data:i.data,mode:o.BYTE,length:i.length}]);break;case o.ALPHANUMERIC:e.push([i,{data:i.data,mode:o.BYTE,length:i.length}]);break;case o.KANJI:e.push([i,{data:i.data,mode:o.BYTE,length:u(i.data)}]);break;case o.BYTE:e.push([{data:i.data,mode:o.BYTE,length:u(i.data)}])}}return e}(g(t,c.isKanjiModeEnabled())),r=function(t,e){const n={},i={start:{}};let r=["start"];for(let s=0;s<t.length;s++){const a=t[s],l=[];for(let t=0;t<a.length;t++){const c=a[t],h=""+s+t;l.push(h),n[h]={node:c,lastCount:0},i[h]={};for(let t=0;t<r.length;t++){const s=r[t];n[s]&&n[s].node.mode===c.mode?(i[s][h]=f(n[s].lastCount+c.length,c.mode)-f(n[s].lastCount,c.mode),n[s].lastCount+=c.length):(n[s]&&(n[s].lastCount=c.length),i[s][h]=f(c.length,c.mode)+4+o.getCharCountIndicator(c.mode,e))}}r=l}for(let t=0;t<r.length;t++)i[r[t]].end=0;return{map:i,table:n}}(i,n),s=h.find_path(r.map,"start","end"),a=[];for(let t=1;t<s.length-1;t++)a.push(r.table[s[t]].node);return e.fromArray(a.reduce((function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[]))},e.rawSplit=function(t){return e.fromArray(g(t,c.isKanjiModeEnabled()))}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t{}var e,o,i,r,s,a,l,c;t.projectName="fileSync",t.author="NoRain",t.versionStr="5.4.4",t.description="一个简单的文件/文字同步服务器",t.closeLog=!1,t.maxMsgLen=64,t.removeMsgLen=20,t.sendTimeout=100,t.jokeAPI="https://v2.jokeapi.dev/joke/Any",function(t){t.ADD="ADD",t.DELETE="DELETE",t.FULL="FULL",t.HEARTBEAT="HEARTBEAT",t.REFRESH="REFRESH",t.ERROR="ERROR"}(e||(e={}));class h{constructor(t){this.createObject=t,this.pool=[]}forEach(t){this.pool.forEach(t)}get(){return this.pool.length>0?(this.pool=this.pool.reverse(),this.pool.pop()):this.createObject()}recycle(t){this.pool.push(t)}}class u{constructor(){this._isOnce=!0,this._isRecover=!0}static createHandler(t,e,n=!0){let o=this.getHandler();return o=this.setHandler(t,e,o,n),o}static getHandler(){let t=this.pool.get();return t._isRecover=!1,t}static setHandler(t,e,n,o=!0){return n._caller=t,n._callback=e,n._isOnce=o,n}static recoverHandler(t){t&&t instanceof u&&0==t.isRecover&&(t._reset(),this.pool.recycle(t))}_reset(){this._caller=null,this._callback=null,this._isOnce=!0,this._isRecover=!0}get isOnce(){return this._isOnce}get isRecover(){return this._isRecover}run(){var t;this._isRecover||(null===(t=this._callback)||void 0===t||t.call(this._caller),this._isOnce&&u.recoverHandler(this))}runWith(t){var e;this._isRecover||(null===(e=this._callback)||void 0===e||e.apply(this._caller,t),this._isOnce&&u.recoverHandler(this))}isMe(t,e){return this._caller==t&&this._callback==e}isCaller(t){return this._caller==t}}u.pool=new h((()=>new u));class d{static on(t,e,n){let o;this.eventMap.has(t)||this.eventMap.set(t,[]),o=this.eventMap.get(t);let i=u.createHandler(n,e,!1);o.push(i),this.eventMap.set(t,o)}static once(t,e,n){let o;this.eventMap.has(t)||this.eventMap.set(t,[]),o=this.eventMap.get(t);let i=u.createHandler(n,e,!0);o.push(i),this.eventMap.set(t,o)}static off(t,e,n){if(this.eventMap.has(t)){let o=this.eventMap.get(t);for(let t=0;t<o.length;t++){let i=o[t];i.isMe(n,e)&&(o.splice(t,1),t--,u.recoverHandler(i))}}}static offAll(t){this.eventMap.forEach(((e,n)=>{for(let n=0;n<e.length;n++){let o=e[n];o.isCaller(t)&&(e.splice(n,1),n--,u.recoverHandler(o))}}))}static offAllEvent(t){if(this.eventMap.has(t)){let e=this.eventMap.get(t);for(let t=0;t<e.length;t++){let n=e[t];u.recoverHandler(n)}this.eventMap.delete(t)}}static offAllEvents(){this.eventMap.forEach(((t,e)=>{for(let e=0;e<t.length;e++){let n=t[e];u.recoverHandler(n)}})),this.eventMap.clear()}static emit(t,...e){if(this.eventMap.has(t)){let n=this.eventMap.get(t);for(let t=0;t<n.length;t++){let o=n[t];o.runWith(e),o.isOnce&&(n.splice(t,1),t--,u.recoverHandler(o))}}}}d.eventMap=new Map;class g{static init(t){this.page=t,this.initJoke()}static initJoke(){window.joke=()=>(fetch(t.jokeAPI).then((t=>t.json())).then((t=>{t.joke?console.log(`%cJoke: %c${t.joke}`,"color: #ff0000;","color: #000000;"):t.setup&&t.delivery?(console.log(`%cQ: %c${t.setup}`,"color: #ff0000;","color: #000000;"),console.log(`%cA: %c${t.delivery}`,"color: #ff0000;","color: #000000;")):console.log("%cUnheihei: %cToday is so heihei that I don't want to tell you a joke.","color: #ff0000;","color: #000000;")})),"Joke is coming...")}static execute(t){if("me"==t)return{name:"病雨",age:NaN,common_langs:["HTML","JS","TS","PY"],interest:["听歌","电子游戏","看小说","看设定","看涩图","下厨"],learning:["unity3d","Laya","node.js","blender"],email:"d3V4aW5ydWZlbmdAcXEuY29t"}}}g.page=null,function(t){t.visibilitychange="visibilitychange",t.deleteItem="deleteItem",t.downloadFile="downloadFile"}(o||(o={})),function(t){t.red="#C52F21",t.green="#047878",t.blue="#0172AD",t.yellow="#F2DF0D"}(i||(i={})),function(t){t.text="text",t.qrcode="qrcode"}(r||(r={})),function(t){t.onmessage="onmessage",t.onopen="onopen",t.onclose="onclose",t.onerror="onerror",t.onopening="onopening"}(s||(s={})),function(t){t.nul="nul",t.loading="loading",t.sending="sending",t.error="error",t.waiting="waiting"}(a||(a={})),function(t){t.deleteItem="deleteItem",t.downloadFile="downloadFile"}(l||(l={})),function(t){t.Conflict="Conflict"}(c||(c={}));class f{}f.serverURL="127.0.0.1",f.socketPort=4200,f.version="1.0.0",f.author="NoRain",f.description="一个简单的文件/文字同步服务器",f.httpApiMap={getSocketInfo:"/getSocketInfo",upload:"/upload"},f.showProgressMinSize=67108864,f.defaultImg="./apple-touch-icon.png";class p{}p.copyBtnClass="btnCopy",p.showQrcodeDivClass="showQrcodeDiv",p.hideQrcodeDivClass="hideQrcodeDiv",p.container='\n    <div class="container" id="container"></div>\n    ',p.fileList='\n    <div id="fileList"></div>\n    ',p.qrcodeButton='\n        <div id="qrcodeButton" class="qrcodeButton">\n            <svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n                <path\n                    stroke-linecap="round"\n                    stroke-linejoin="round"\n                    d="M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"\n                ></path>\n                <path\n                    stroke-linecap="round"\n                    stroke-linejoin="round"\n                    d="M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"\n                ></path>\n            </svg>\n        </div>\n    ',p.themeButton='\n        <div id="themeButton" class="themeButton"></div>\n        ',p.myProgress='\n        <dialog close id = "myProgress">\n            <article id = "myProgressCard">\n                <progress id = "myProgressValue" value="25" max="100"></progress>\n                <p id="myProgressText">25%</p>\n            </article>\n        </dialog>\n    ',p.myAlert='\n        <dialog close id = "myAlert">\n            <article>\n                <header>\n                    <button aria-label="Close" rel="prev"></button>\n                    <p>\n                        <strong>提示</strong>\n                    </p>\n                </header>\n                <p class="dialogContent">hello world!</p>\n                <Div id="qrcodeDiv">\n                    <Img id="qrcodeImg"></Img>\n                </Div>\n            </article>\n        </dialog>\n        ',p.myDialog='\n        <dialog close id = "myDialog">\n            <article>\n                <header>\n                    <button aria-label="Close" rel="prev"></button>\n                    <p>\n                        <strong>提示</strong>\n                    </p>\n                </header>\n                <p class="dialogContent">hello world!</p>\n                <footer>\n                    <button className="secondary">\n                    取消\n                    </button>\n                    <button>确认</button>\n                </footer>\n            </article>\n        </dialog>\n        ',p.moonSVG='<svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"></path>\n    </svg>',p.sunSVG='<svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path>\n    </svg>',p.runButton='\n        <div id="runButton" class="runButton">\n            <svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n                <path stroke-linecap="round" stroke-linejoin="round" d="m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"></path>\n            </svg>\n        </div>\n        ',p.tipsComponent='\n        <article class="tips">提示</article>\n        ',p.uploadComponent='\n        <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data">\n\t\t\t\t<fieldset role="group">\n\t\t\t\t\t<input type="file" id="fileInput" name="file" value="浏览" />\n\t\t\t\t\t<input type="text" id="textInput" name="text" placeholder="输入文本..." />\n\t\t\t\t\t<input type="button" value="发送" id="uploadButton" />\n\t\t\t\t</fieldset>\n\t\t\t</form>\n        ',p.copyNodeButton=".copyMsg",p.fileItem='\n    <form class="item" class="grid">\n        <p class="NameOrText"></p>\n        <div>\n            <small class="msgDate"></small>\n            <button type="button" class="downloadFile">下载</button>\n            <button type="button" class="copyMsg">复制</button>\n            <button type="button" class="deleteMsg">删除</button>\n        </div>\n    </form>\n    ',p.alertImgPreview='\n    <dialog close id = "alertImgPreview">\n        <article id = "alertImgPreviewArticle">\n            <header id = "alertImgPreviewHeader">\n                <button aria-label="Close" rel="prev"></button>\n                <p>\n                    <strong>图片预览</strong>\n                </p>\n            </header>\n            <img id="imgPreview">\n        </article>\n    </dialog>\n    ',p.alertVideoPreview='\n    <dialog close id = "alertVideoPreview">\n        <article id = "alertVideoPreviewArticle">\n            <header id = "alertVideoPreviewHeader">\n                <button aria-label="Close" rel="prev"></button>\n                <p>\n                    <strong>视频预览</strong>\n                </p>\n            </header>\n            <video controls id="videoPreview"></video>\n        </article>\n    </dialog>\n    ',p.alertAudioPreview='\n    <dialog close id = "alertAudioPreview">\n        <article>\n            <header id = "alertAudioPreviewHeader">\n                <button aria-label="Close" rel="prev"></button>\n                <p>\n                    <strong>音频预览</strong>\n                </p>\n            </header>\n            <audio controls id="audioPreview"></audio>\n        </article>\n    </dialog>\n    ';class m{getSocketInfo(){return fetch(f.httpApiMap.getSocketInfo).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))}uploadMsg(t,e){return new Promise(((n,o)=>{const i=new XMLHttpRequest;i.open("POST",f.httpApiMap.upload,!0),i.upload.onprogress=e,i.onload=()=>{200===i.status?n(i.response):o(i.response)},i.onerror=()=>{o("上传失败，请检查网络连接")},i.send(t)}))}}class v{constructor(){this.lostConnectTime=4e4,this.heartBeatTime=3e4,this.reconnectTimes=4,this.reconnectTime=3e3,this._onSocketMessage=t=>{let n=JSON.parse(t.data);n.operate==e.HEARTBEAT?this.getHeartBeat(n):n.operate==e.REFRESH?this.getRefresh(n):n.operate==e.ERROR?(console.warn(n.data),d.emit(s.onerror,n.data)):(this._lastActionTimestamp=n.timeStamp,d.emit(s.onmessage,n))},this._onSocketOpen=()=>{this.resetConfig(),this.sendHeartBeat(),d.emit(s.onopen)},this._onSocketClose=()=>{d.emit(s.onclose),this.tryReConnect()},this._onSocketError=t=>{console.warn(t),d.emit(s.onerror)}}get socketStatus(){return this.socket?this.socket.readyState:-1}_onVisibilityChange(t){t||this.tryRefresh()}initSocket(){this.close(),this.socket=new WebSocket(`ws://${f.serverURL}:${f.socketPort}`),d.emit(s.onopening),this.addEvent()}addEvent(){d.on(o.visibilitychange,this._onVisibilityChange,this),this.socket&&(this.socket.addEventListener("message",this._onSocketMessage),this.socket.addEventListener("open",this._onSocketOpen),this.socket.addEventListener("close",this._onSocketClose),this.socket.addEventListener("error",this._onSocketError))}removeEvent(){d.off(o.visibilitychange,this._onVisibilityChange,this),this.socket&&(this.socket.removeEventListener("message",this._onSocketMessage),this.socket.removeEventListener("open",this._onSocketOpen),this.socket.removeEventListener("close",this._onSocketClose),this.socket.removeEventListener("error",this._onSocketError))}send(t){let e=-1;return this.socket&&(e=this.socket.readyState,e==WebSocket.OPEN&&this.socket.send(t)),e}close(t=!1){this.removeEvent(),this.socket&&(this.socket.readyState!=WebSocket.CLOSED&&this.socket.readyState!=WebSocket.CLOSING&&this.socket.close(),this.socket=null),t&&d.emit(s.onclose,!0)}tryRefresh(){let t={operate:e.REFRESH,timeStamp:Date.now()};this.send(JSON.stringify(t))}getRefresh(t){t.timeStamp!=this._lastActionTimestamp&&(console.warn("数据不一致，刷新"),d.emit(s.onopen))}resetConfig(){this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.lostConnectTimer&&clearTimeout(this.lostConnectTimer),this.heartBeatTimer&&clearTimeout(this.heartBeatTimer),this.reconnectTimes=4,this.lostConnectTime=4e4,this.heartBeatTime=3e4,this.reconnectTime=3e3}sendHeartBeat(){this.send(JSON.stringify({operate:e.HEARTBEAT,timeStamp:Date.now()}))}getHeartBeat(t){this.lostConnectTimer&&clearTimeout(this.lostConnectTimer),this.heartBeatTimer&&clearTimeout(this.heartBeatTimer);let e=this;this.heartBeatTimer=setTimeout((()=>{e.sendHeartBeat()}),this.heartBeatTime),this.lostConnectTimer=setTimeout((()=>{e.tryReConnect()}),this.lostConnectTime)}tryReConnect(){this.lostConnectTimer&&clearTimeout(this.lostConnectTimer),this.heartBeatTimer&&clearTimeout(this.heartBeatTimer),this.reconnectTimer&&clearTimeout(this.reconnectTimer);let t=this;this.reconnectTimes>0?(this.reconnectTimes--,this.initSocket(),this.reconnectTimer=setTimeout((()=>{t.tryReConnect()}),this.reconnectTime)):this.close(!0)}}class y{constructor(){}static init(){this.netHttp=new m,this.netSocket=new v}static initSocketInfo(){return this.netHttp.getSocketInfo()}static uploadMsg(t,e){return this.netHttp.uploadMsg(t,e)}static initSocket(){this.netSocket.initSocket()}static getFullMsg(){var t;let n={operate:e.FULL,timeStamp:Date.now()};null===(t=this.netSocket)||void 0===t||t.send(JSON.stringify(n))}static deleteMsg(t){var n;let o={operate:e.DELETE,timeStamp:Date.now(),data:{fileOrTextHash:t}};null===(n=this.netSocket)||void 0===n||n.send(JSON.stringify(o))}getErrorMsg(t){return t===c.Conflict?"文件已存在":"未知错误"}}class w{static tranLogger(){t.closeLog&&(this.sLog=console.log,this.iLog=console.info,this.wLog=console.warn,this.eLog=console.error,console.log=function(){},console.info=function(){},console.warn=function(){},console.error=function(){})}static log(...e){t.closeLog?this.sLog(...e):console.log(...e)}static info(...e){t.closeLog?this.iLog(...e):console.info(...e)}static warn(...e){t.closeLog?this.wLog(...e):console.warn(...e)}static error(...e){t.closeLog?this.eLog(...e):console.error(...e)}}var b,E,C,T=n(122),x=n.n(T),S=n(712);class k{static formatSize(t){return t<1024?Math.floor(t)+"KB":t<1048576?(t/1024).toFixed(2)+"MB":(t/1024/1024).toFixed(2)+"GB"}static formatTime(t){const e=new Date(t);return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}:${("0"+e.getSeconds()).slice(-2)}`}static copyTextByClipboard(t,e){new(x())(t).on("success",(function(t){t.clearSelection(),null==e||e()}))}static copyText(t){const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}static copyTextES6(t){navigator.clipboard.writeText(t).then((()=>{console.log("复制成功")})).catch((()=>{console.log("复制失败")}))}static readText(){return navigator.clipboard.readText()}static createQRCode(t,e="#000000",n="#ffffff"){let o={quality:.3,margin:1,color:{dark:e,light:n},width:256};return this.canvasElement||(this.canvasElement=document.createElement("canvas")),S.toDataURL(this.canvasElement,t,o)}static downloadFile(t,e){this.aHref||(this.aHref=document.createElement("a")),this.aHref.href=t,this.aHref.download=e,this.aHref.target="_blank",document.body.appendChild(this.aHref),this.aHref.click(),document.body.removeChild(this.aHref)}static createConnonControl(t,e,n,o="afterbegin"){return t.insertAdjacentHTML(o,e),document.getElementById(n)}static createControlByHtml(t){this.div||(this.div=document.createElement("div")),this.div.innerHTML=t;let e=this.div.firstElementChild;return this.div.removeChild(e),e}static get mouseUpEvent(){return this.moueseUpEvent||(this.moueseUpEvent=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window}),Object.freeze(this.moueseUpEvent)),this.moueseUpEvent}static fixMinWidth(){window.navigator.userAgent.indexOf("Firefox")>-1?document.body.style.minWidth="1200px":document.body.style.minWidth="980px"}static isCommonFile(t){if(!this.suffix2Type){this.suffix2Type={};for(let t in this.fileType2Sfx)this.fileType2Sfx[t].forEach((e=>{this.suffix2Type[e]=t}))}return this.suffix2Type[t]?this.suffix2Type[t]:"other"}static getPlatform(){let t=window.navigator.userAgent;return t.indexOf("Windows")>-1?"Windows":t.indexOf("Macintosh")>-1?"Macintosh":t.indexOf("Linux")>-1?"Linux":t.indexOf("Android")>-1?"Android":t.indexOf("iPhone")>-1?"iPhone":t.indexOf("iPad")>-1?"iPad":"other"}static isWin(){return"Windows"===this.getPlatform()}}k.fileType2Sfx={img:[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".ico"],video:[".mp4",".webm",".ogg",".avi",".wmv",".rmvb",".flv",".mov",".3gp"],audio:[".mp3",".wav",".flac",".ape",".wma",".aac",".ogg"]};class L{static get body(){return L._body||(L._body=document.body),L._body}static showAudioPreview(t){this.audioPreview||(this.audioPreview=new N(this.body)),this.audioPreview.show(t)}static showImgPreview(t){this.imgPreview||(this.imgPreview=new D(this.body)),this.imgPreview.show(t)}static showVideoPreview(t){this.videoPreview||(this.videoPreview=new R(this.body)),this.videoPreview.show(t)}static showNotice(t){this.myTips||(this.myTips=new B(this.body)),this.myTips.show(t)}static showDialog(t,e,n,o,i="提示",r=!1){this.myDialog||(this.myDialog=new M(this.body)),this.hideAll(),this.myDialog.show(t,e,n,o,i,r)}static hideDialog(){this.myDialog&&this.myDialog.close()}static showAlert(t,e="提示",n=r.text,o=null,i=null){this.myAlert||(this.myAlert=new A(this.body)),this.myAlert.show(t,e,n,o,i)}static hideAlert(){this.myAlert&&this.myAlert.close()}static showProgress(t,e=!1){this.myProgress||(this.myProgress=new I(this.body)),this.myProgress.show(t,e)}static hideProgress(){this.myProgress&&this.myProgress.close()}static hideAll(){this.hideDialog(),this.hideAlert(),this.hideProgress()}}class P{init(){}show(...t){}close(){}}class M extends P{constructor(t){super(),this.parent=t,this.init()}init(){this.dialog=k.createConnonControl(this.parent,p.myDialog,"myDialog"),this.dialogTitle=this.dialog.querySelector("article header p strong"),this.dialogContent=this.dialog.querySelectorAll("article p")[1],this.dialogCancelButton=this.dialog.querySelector("article footer button:first-child"),this.dialogSureButton=this.dialog.querySelector("article footer button:last-child"),this.dialogCloseButton=this.dialog.querySelector("article header button"),this.dialogSureButton.addEventListener("click",(t=>{var e;t.preventDefault(),this.dialog.close(),null===(e=this._sure)||void 0===e||e.call(this._caller),this._sure=null,this._caller=null})),this.dialogCancelButton.addEventListener("click",(t=>{var e;t.preventDefault(),this.dialog.close(),null===(e=this._cancel)||void 0===e||e.call(this._caller),this._cancel=null,this._caller=null})),this.dialogCloseButton.addEventListener("click",(t=>{var e;t.preventDefault(),this.dialog.close(),null===(e=this._cancel)||void 0===e||e.call(this._caller),this._cancel=null,this._caller=null}))}show(t,e,n,o,i="提示",r=!1){this._caller=e,this._sure=n,this._cancel=o,this.dialogTitle.innerText=i,this.dialogContent.innerText=t,r?(this.dialogCancelButton.style.display="none",this.dialogCloseButton.style.display="none"):(this.dialogCancelButton.style.display="inline-block",this.dialogCloseButton.style.display="inline-block"),this.dialog.open&&this.dialog.close(),this.dialog.showModal()}close(){this.dialog.close(),this._caller=null,this._sure=null,this._cancel=null}}class A extends P{constructor(t){super(),this.parent=t,this.init()}init(){this.dialog=k.createConnonControl(this.parent,p.myAlert,"myAlert"),this.qrcodeDiv=this.dialog.querySelector("#qrcodeDiv"),this.imgQrCode=this.dialog.querySelector("#qrcodeImg"),this.dialogTitle=this.dialog.querySelector("article header p strong"),this.dialogContent=this.dialog.querySelectorAll("article p")[1],this.dialogCloseButton=this.dialog.querySelector("article header button"),this.dialogCloseButton.addEventListener("click",(t=>{var e;t.preventDefault(),this.dialog.close(),null===(e=this._callback)||void 0===e||e.call(this._caller),this._callback=null,this._caller=null}))}show(t,e="提示",n=r.text,o=null,i=null){this._caller=o,this._callback=i,this.dialogTitle.innerText=e,n==r.text?(this.dialogContent.style.display="block",this.dialogContent.innerText=t,this.qrcodeDiv.className=p.hideQrcodeDivClass,this.imgQrCode&&(this.imgQrCode.style.display="none")):n==r.qrcode&&(this.dialogContent.innerText="",this.qrcodeDiv.className=p.showQrcodeDivClass,this.dialogContent&&(this.dialogContent.style.display="none"),this.imgQrCode&&k.createQRCode(t).then((t=>{this.imgQrCode.src=t,this.imgQrCode.style.display="block"})).catch((n=>{this.show(t,e,r.text,o,i),console.error(n)}))),this.dialog.open&&this.dialog.close(),this.dialog.showModal()}close(){this.dialog.close(),this._caller=null,this._callback=null}}class B extends P{constructor(t){super(),this.parent=t,this.showIngTips=[],this.tipsPool=new h(this.createTips)}show(t){let e=this.tipsPool.get();this.showIngTips.push(e),this.parent.appendChild(e),e.innerText=t;let n=this;e.startTime=setTimeout((()=>{e.style.top="30%",e.style.opacity="0",e.holdTime=setTimeout((()=>{n.recoverTips(e)}),1e3)}),1e3)}close(){this.showIngTips.forEach((t=>{this.recoverTips(t)}))}createTips(){return k.createControlByHtml(p.tipsComponent)}recoverTips(t){this.parent.contains(t)&&this.parent.removeChild(t),t.startTime&&(clearTimeout(t.startTime),clearTimeout(t.holdTime),t.startTime=null,t.holdTime=null),t.innerText="",this.tipsPool.recycle(t)}}class I extends P{constructor(t){super(),this.parent=t,this.init()}init(){this.progress=k.createConnonControl(this.parent,p.myProgress,"myProgress"),this.progressCard=this.progress.querySelector("#myProgressCard"),this.progressValue=this.progress.querySelector("#myProgressValue"),this.myProgressText=this.progress.querySelector("#myProgressText"),this.progressCard.style.position="fixed",this.progressCard.style.left="50%",this.progressCard.style.top="50%",this.progressCard.style.transform="translate(-50%, -50%)",this.progressCard.style.width="30%"}show(t,e=!1){t=(t=(t*=100)>99.9?99.9:t)<0?0:t,this.progressValue.value=t,this.myProgressText.textContent=`文件上传中，进度：${t.toFixed(1)}%`,this.progress.open||this.progress.showModal(),e&&t>=99.9&&this.close()}close(){this.myProgressText.textContent="0%",this.progressValue.value=0,this.progress.close()}}class D extends P{constructor(t){super(),this.parent=t,this.init()}init(){this.dialog=k.createConnonControl(this.parent,p.alertImgPreview,"alertImgPreview"),this.img=this.dialog.querySelector("#imgPreview"),this.dialogCloseButton=this.dialog.querySelector("article header button"),this.dialogCloseButton.addEventListener("click",(t=>{t.preventDefault(),this.close()}))}show(t){this.img.src=t,this.dialog.open&&this.dialog.close(),this.dialog.showModal()}close(){this.dialog.close(),this.img.src=f.defaultImg}}class R extends P{constructor(t){super(),this.parent=t,this.init()}init(){this.dialog=k.createConnonControl(this.parent,p.alertVideoPreview,"alertVideoPreview"),this.video=this.dialog.querySelector("#videoPreview"),this.dialogCloseButton=this.dialog.querySelector("article header button"),this.dialogCloseButton.addEventListener("click",(t=>{t.preventDefault(),this.close()}))}show(t){this.video.src=t,this.video.play(),this.dialog.open&&this.dialog.close(),this.dialog.showModal()}close(){this.dialog.close(),this.video.currentTime=0,this.video.pause(),this.video.src="",this.video.poster=f.defaultImg}}class N extends P{constructor(t){super(),this.parent=t,this.init()}init(){this.dialog=k.createConnonControl(this.parent,p.alertAudioPreview,"alertAudioPreview"),this.audio=this.dialog.querySelector("#audioPreview"),this.dialogCloseButton=this.dialog.querySelector("article header button"),this.dialogCloseButton.addEventListener("click",(t=>{t.preventDefault(),this.dialog.close()}))}show(t){this.audio.src=t,this.dialog.open&&this.dialog.close(),this.dialog.showModal()}close(){this.audio.currentTime=0,this.audio.pause(),this.dialog.close()}}class _{static get inputStatus(){return this._inputStatus}static get static(){return this.inputStatus}static changeStatus(t){if(this.inputStatus!==t)switch(this._inputStatus=t,t){case a.loading:this.inputLock=!0,this.uploadButton.value="加载中",this.textInput.placeholder="正在加载中",this.uploadButton.style.backgroundColor=i.blue,this.uploadButton.style.borderColor=i.blue;break;case a.sending:this.inputLock=!0,this.uploadButton.value="发送中",this.textInput.placeholder="正在发送中",this.uploadButton.style.backgroundColor=i.yellow,this.uploadButton.style.borderColor=i.yellow;break;case a.error:this.inputLock=!0,this.uploadButton.value="错误",this.textInput.placeholder="网络发生错误",this.uploadButton.style.backgroundColor=i.red,this.uploadButton.style.borderColor=i.red;break;case a.waiting:this.inputLock=!1,this.uploadButton.value="发送",this.textInput.placeholder="等待输入中",this.uploadButton.style.backgroundColor=i.green,this.uploadButton.style.borderColor=i.green}}static init(t){this.pageParent=t,this._inputStatus=a.nul,this.setUI(),this.addEvent()}static setUI(){let t=k.createConnonControl(this.pageParent,p.uploadComponent,"uploadForm");this.fileInput=t.querySelector("#fileInput"),this.textInput=t.querySelector("#textInput"),this.uploadButton=t.querySelector("#uploadButton")}static addEvent(){this.uploadButton.addEventListener("click",this.sendMsg),this.textInput.addEventListener("keydown",this.getEnterDown)}static removeEvent(){this.uploadButton.removeEventListener("click",this.sendMsg),this.textInput.removeEventListener("keydown",this.getEnterDown)}static sendHttpMsg(e){y.uploadMsg(e,(t=>{t.lengthComputable&&t.total>f.showProgressMinSize&&L.showProgress(t.loaded/t.total)})).then((t=>{console.log(t)})).catch((t=>{L.showAlert(t,"上传失败")})).finally((()=>{setTimeout((()=>{this.inputStatus===a.sending&&this.changeStatus(a.waiting),L.hideProgress()}),t.sendTimeout),this.fileInput.value="",this.textInput.value="",this.fileInput.disabled=!1,this.textInput.disabled=!1}))}static clear(){this.removeEvent()}}b=_,_._inputStatus=a.nul,_.inputLock=!1,_.getEnterDown=t=>{"Enter"===t.key&&(t.preventDefault(),b.sendMsg())},_.sendMsg=()=>{var t;if(b.inputLock)return;let e=b.textInput.value;if(!(e||b.fileInput.files&&b.fileInput.files.length))return void L.showNotice("请选择文件或输入文本");b.inputLock=!0,b.changeStatus(a.sending);const n=null===(t=b.fileInput.files)||void 0===t?void 0:t[0],o=new FormData;n&&o.append("file",n),o.append("text",e),b.fileInput.disabled=!0,b.textInput.disabled=!0,b.sendHttpMsg(o)};class H{constructor(){this.maxTextLength=30,this.downloadFile=t=>{t.stopImmediatePropagation();let e=this.data.fileName,n=this.isCommonFile(e);"img"===n?L.showImgPreview(this.data.url):"video"===n?L.showVideoPreview(this.data.url):"audio"===n?L.showAudioPreview(this.data.url):d.emit(l.downloadFile,this.data.url,this.data.fileName)},this.copyData=t=>{if(this.data){const t=(this.data.text||this.data.url).toString();this.btnCopy.setAttribute("data-clipboard-text",t)}},this.deleteData=t=>{var e;t.stopImmediatePropagation(),(null===(e=this.data)||void 0===e?void 0:e.fileOrTextHash)&&d.emit(l.deleteItem,this.data.fileOrTextHash)}}initItem(t){this.form||(this.form=k.createControlByHtml(p.fileItem),this.txtNameOrText=this.form.querySelector("p"),this.txtDate=this.form.querySelector("div small"),this.btnDownload=this.form.querySelector("div .downloadFile"),this.btnCopy=this.form.querySelector("div .copyMsg"),this.btnDel=this.form.querySelector("div .deleteMsg")),this.addEvent(),this.setMyParnet(t)}addEvent(){this.btnDownload.addEventListener("click",this.downloadFile),this.btnCopy.addEventListener("click",this.copyData),this.btnDel.addEventListener("click",this.deleteData)}removeEvent(){this.btnDownload.removeEventListener("click",this.downloadFile),this.btnCopy.removeEventListener("click",this.copyData),this.btnDel.removeEventListener("click",this.deleteData)}isCommonFile(t){let e=t.slice(t.lastIndexOf("."));return k.isCommonFile(e)}setData(t,e){if(this.data=t,this.initItem(e),t.fileName){let e=t.fileName;if(e.length>this.maxTextLength){let t=e.lastIndexOf(".");if(t>0){let n=e.slice(t);e=e.slice(0,this.maxTextLength-n.length)+"[...]"+n}else e=e.slice(0,this.maxTextLength-6)+"[...]"+e.slice(-6)}this.txtNameOrText.textContent=e;let n=this.isCommonFile(t.fileName);this.btnDownload.innerText="img"===n||"video"===n||"audio"===n?"预览":"下载"}else{let e=t.text;e.length>this.maxTextLength&&(e=e.slice(0,this.maxTextLength)+"[...]"),this.txtNameOrText.textContent=e}"file"===t.msgType?(this.btnDownload.style.display="block",this.btnCopy.style.display="none"):(this.btnDownload.style.display="none",this.btnCopy.style.display="block"),null!=t.size&&t.size>0?(this.txtNameOrText.setAttribute("data-tooltip","文件大小："+k.formatSize(t.size)),this.txtNameOrText.style.borderBottom="none"):this.txtNameOrText.removeAttribute("data-tooltip"),this.txtDate.textContent=k.formatTime(t.timestamp)}clear(){var t,e;this.data=null,null===(e=null===(t=this.form)||void 0===t?void 0:t.parentNode)||void 0===e||e.removeChild(this.form),this.removeEvent(),this.btnCopy.removeAttribute("data-clipboard-text"),this.txtNameOrText.removeAttribute("data-tooltip")}setMyParnet(t){t&&this.form&&t.insertBefore(this.form,t.firstChild)}}class O{static init(t){this.pageParent=t,this.setUI(),this.itemPool=new h((()=>new H)),this.itemList=[],this.fileOrTextHashList=[],k.copyTextByClipboard(p.copyNodeButton,this.copySuccess.bind(this))}static setUI(){this.fileListDiv=k.createConnonControl(this.pageParent,p.fileList,"fileList")}static onFullItems(t){this.clearItems(),this.msgList=t,t.forEach((t=>{this.onAddItem(t)}))}static onDeleteItem(t){let e=this.fileOrTextHashList.indexOf(t);if(-1!=e){this.fileOrTextHashList.splice(e,1);let t=this.itemList[e];this.itemList.splice(e,1),t&&(t.clear(),this.itemPool.recycle(t))}}static copySuccess(){L.showNotice("复制成功")}static onAddItem(t){if(-1==this.fileOrTextHashList.indexOf(t.fileOrTextHash)){this.fileOrTextHashList.push(t.fileOrTextHash),this.removeItems();let e=this.itemPool.get();e.setData(t,this.fileListDiv),this.itemList.push(e)}}static removeItems(){if(this.fileOrTextHashList.length>t.maxMsgLen)for(let e=0;e<t.removeMsgLen;e++){let t=this.fileOrTextHashList[0];t&&this.onDeleteItem(t)}}static clearItems(){this.msgList&&(this.msgList.length=0),this.itemList&&(this.itemList.forEach((t=>{t.clear()})),this.itemList.length=0),this.fileOrTextHashList&&(this.fileOrTextHashList.length=0)}static clear(){this.clearItems()}}class F{static init(t){this.pageParent=t,this.setUI(),this.addEvent()}static setUI(){this.qrcodeButtonSvg=k.createConnonControl(this.pageParent,p.qrcodeButton,"qrcodeButton")}static addEvent(){this.qrcodeButtonSvg.addEventListener("click",this.onShowQRCode)}static removeEvent(){this.qrcodeButtonSvg.removeEventListener("click",this.onShowQRCode)}static clear(){var t;null===(t=this.pageParent)||void 0===t||t.removeChild(this.qrcodeButtonSvg),this.pageParent=null,this.removeEvent()}}F.onShowQRCode=()=>{L.showAlert(window.location.href,"当前网址",r.qrcode)};class U{}U.toolUrl="/tool/QuickSendTool.exe",U.toolName="QuickSendTool";class q{static init(t){this.pageParent=t,k.isWin()&&(this.setUI(),this.addEvent())}static setUI(){this.runButton=k.createConnonControl(this.pageParent,p.runButton,"runButton")}static addEvent(){this.runButton.addEventListener("click",this.onShowExeDownload)}static removeEvent(){this.runButton.removeEventListener("click",this.onShowExeDownload)}static clear(){var t;null===(t=this.pageParent)||void 0===t||t.removeChild(this.runButton),this.pageParent=null,this.removeEvent()}}E=q,q.onShowExeDownload=()=>{L.showDialog("是否下载桌面快捷发送工具？",E,(()=>{k.downloadFile(U.toolUrl,U.toolName)}),null,"下载提示")};class j{static get isDark(){if(-1==this._isDark){let t=localStorage.getItem("isDark");null==t||null==t?(this._isDark=0,localStorage.setItem("isDark","false")):this._isDark="true"==t?1:0}return!!this._isDark}static set isDark(t){this._isDark=t?1:0,localStorage.setItem("isDark",t.toString())}static init(t){this.parent=t,this.setUI(),this.initTheme(),this.addEvent()}static setUI(){this.themeButtonSvg=k.createConnonControl(this.parent,p.themeButton,"themeButton")}static initTheme(){this.isDark?(this.themeButtonSvg.innerHTML=p.sunSVG,document.documentElement.setAttribute("data-theme","dark")):(this.themeButtonSvg.innerHTML=p.moonSVG,document.documentElement.setAttribute("data-theme","light"))}static addEvent(){this.themeButtonSvg.addEventListener("click",this.onChangeTheme)}static removeEvent(){this.themeButtonSvg.removeEventListener("click",this.onChangeTheme)}static clear(){this.removeEvent()}}C=j,j._isDark=-1,j.onChangeTheme=()=>{C.isDark=!C.isDark,C.initTheme()},new class{constructor(){this.init()}init(){window.NiarApp=g,k.fixMinWidth(),g.init(this),document.title=t.projectName,w.tranLogger(),this.initUI(),F.init(this.pageParent),j.init(this.pageParent),q.init(this.pageParent),O.init(this.pageParent),_.init(this.pageParent),y.init(),this.addEvent(),y.initSocketInfo().then((t=>{f.serverURL=t.socketServerURL,f.socketPort=t.socketPort,f.version=t.version,f.author=t.author,f.description=t.description,f.projectName=t.projectName,y.initSocket(),this.printMsg()})).catch((t=>{w.error(t)}))}initUI(){this.pageParent=k.createConnonControl(document.body,p.container,"container")}printMsg(){w.log("%c"+f.projectName+"：%c"+f.description,`color: ${i.red};font-size: large;`,`color: ${i.blue}; `),w.log("%c作者：%c"+f.author,`color: ${i.green}; `,`color: ${i.blue};`),w.log("%c当前版本：%c"+f.version,`color: ${i.green}; `,`color: ${i.blue}; `)}addEvent(){document.addEventListener(o.visibilitychange,(()=>{d.emit(o.visibilitychange,document.hidden)})),d.on(s.onclose,this.onSocketClose,this),d.on(s.onopen,this.onSocketOpen,this),d.on(s.onmessage,this.onSocketMsg,this),d.on(s.onerror,this.onSocketError,this),d.on(s.onopening,this.onSocketOpening,this),d.on(l.deleteItem,this.onDeleteItem,this),d.on(l.downloadFile,this.onDownloadFile,this)}removeEvent(){document.removeEventListener(o.visibilitychange,(()=>{d.emit(o.visibilitychange,document.hidden)})),d.off(s.onclose,this.onSocketClose,this),d.off(s.onopen,this.onSocketOpen,this),d.off(s.onmessage,this.onSocketMsg,this),d.off(s.onerror,this.onSocketError,this),d.off(s.onopening,this.onSocketOpening,this),d.off(l.deleteItem,this.onDeleteItem,this),d.off(l.downloadFile,this.onDownloadFile,this)}onSocketClose(t=!1){_.changeStatus(a.error),t&&L.showDialog("服务器已关闭，点击确定刷新页面尝试重连",this,(()=>{location.reload()}),null,"提示",!0)}onSocketOpen(){_.changeStatus(a.waiting),y.getFullMsg()}onSocketError(){_.changeStatus(a.error)}onSocketMsg(t){switch(t.operate){case e.ADD:O.onAddItem(t.data.msg);break;case e.DELETE:O.onDeleteItem(t.data.fileOrTextHash);break;case e.FULL:O.onFullItems(t.data.msgs)}}onSocketOpening(){_.changeStatus(a.loading)}onDeleteItem(t){y.deleteMsg(t)}onDownloadFile(t,e){k.downloadFile(t,e)}clear(){O.clear(),_.clear(),j.clear()}}})()})();